import{j as e,c as y}from"./locales-548059eb.js";import{r as i}from"./react-libs-840bfe49.js";import{c as z}from"./rc-cli_site-mobile-demo-3935d5c1.js";import{c as P,r as v}from"./raf-f0838b14.js";import{u as A}from"./use-merged-state-79e14435.js";import{C as B}from"./ConfigProviderContext-0f984393.js";import{g as L}from"./unit-bb3e6514.js";import{c as w}from"./base-1da74170.js";import{F as O}from"./index-1a16af2f.js";import{a as k}from"./index-9cdb6f61.js";import"./mobile-094a819d.js";import"./index-59db7e48.js";import"./Loading-c60598b2.js";import"./constant-7552c2aa.js";let V=0;function T(t){return Math.min(Math.max(+t,0),100)}function _(t,l){const r=t?1:0;return`M ${l/2} ${l/2} m 0, -500 a 500, 500 0 1, ${r} 0, 1000 a 500, 500 0 1, ${r} 0, -1000`}const H={top:0,right:90,bottom:180,left:270},S=t=>{const{prefixCls:l,createNamespace:r}=i.useContext(B),[c]=r("circle",l),f=`rc-circle-${V++}`,[m,d]=i.useState(()=>t.defaultRate||0),[R]=A({defaultValue:t.defaultRate,value:t.rate}),u=i.useMemo(()=>+t.strokeWidth+1e3,[t.strokeWidth]),$=i.useMemo(()=>_(t.clockwise,u),[t.clockwise,u]),W=i.useMemo(()=>{const s=H[t.startPosition];if(s)return{transform:`rotate(${s}deg)`}},[t.startPosition]);i.useEffect(()=>{var C;let s;const x=Date.now(),a=m,o=T(R),h=Math.abs((a-o)*1e3/+t.speed),j=()=>{var E;const I=Date.now(),g=Math.min((I-x)/h,1)*(o-a)+a,M=T(parseFloat(g.toFixed(1)));d(M),(E=t.onChange)==null||E.call(t,M),(o>m?g<o:g>o)&&(s=v(j))};return t.speed?(s&&P(s),s=v(j)):(d(o),(C=t.onChange)==null||C.call(t,o)),()=>{P(s)}},[R]);const b=()=>{const{strokeWidth:x,strokeLinecap:a}=t,o=3140*m/100,h=w(t.color)?`url(#${f})`:t.color,j={stroke:h,strokeWidth:`${+x+1}px`,strokeLinecap:a,strokeDasharray:`${o}px 3140px`};return e.jsx("path",{d:$,style:j,className:y(c("hover")),stroke:h})},F=()=>{const s={fill:t.fill,stroke:t.layerColor,strokeWidth:`${t.strokeWidth}px`};return e.jsx("path",{className:y(c("layer")),style:s,d:$})},D=()=>{const{color:s}=t;if(!w(s))return null;const x=Object.keys(s).sort((a,o)=>parseFloat(a)-parseFloat(o)).map((a,o)=>e.jsx("stop",{offset:a,stopColor:s[a]},o));return e.jsx("defs",{children:e.jsx("linearGradient",{className:"linearGradient",id:f,x1:"100%",y1:"0%",x2:"0%",y2:"0%",children:x})})},G=()=>t.text?e.jsx("div",{className:y(c("text")),children:t.text}):t.children;return e.jsxs("div",{className:y(c(),t.className),style:{...t.style,...L(t.size)},children:[e.jsxs("svg",{viewBox:`0 0 ${u} ${u}`,style:W,children:[D(),F(),b()]}),G()]})};S.defaultProps={clockwise:!0,speed:100,fill:"none",strokeWidth:40,startPosition:"top"};const n=S;const N=t=>Math.min(Math.max(t,0),100),nt=()=>{const{DemoBlock:t,DemoSection:l}=z,[r,c]=i.useState(70),f=()=>{c(d=>N(d+20))},m=()=>{c(d=>N(d-20))};return e.jsxs(l,{className:"demo-circle",children:[e.jsx(t,{title:"基础用法",children:e.jsx(n,{rate:r,text:`${r}%`})}),e.jsxs(t,{title:"样式定制",children:[e.jsx(n,{strokeWidth:60,rate:r,text:"宽度定制"}),e.jsx(n,{color:"#ee0a24",layerColor:"#ebedf0",rate:r,text:"颜色定制"}),e.jsx(n,{color:{"0%":"#3fecff","100%":"#6149f6"},rate:r,text:"渐变色"}),e.jsx(n,{color:"#07c160",clockwise:!1,rate:r,text:"逆时针",style:{marginTop:15}}),e.jsx(n,{color:"#7232dd",clockwise:!1,size:120,rate:r,text:"大小定制",style:{marginTop:15}}),e.jsx(O,{style:{marginTop:15},align:"center",justify:"center",children:e.jsxs(k.Group,{children:[e.jsx(k,{onClick:f,type:"primary",children:"增加"}),e.jsx(k,{onClick:m,type:"danger",children:"减少"})]})})]}),e.jsxs(t,{title:"起始位置",children:[e.jsx(n,{startPosition:"left",defaultRate:70,text:"左侧"}),e.jsx(n,{startPosition:"right",defaultRate:70,text:"右侧"}),e.jsx(n,{startPosition:"bottom",defaultRate:70,text:"底部"})]})]})};export{nt as default};
